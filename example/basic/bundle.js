!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),o=document.createElement("canvas");o.width=800,o.height=800;var i=o.getContext("2d"),a=new Image;document.body.appendChild(o),a.src="https://static.codemao.cn/kitten/H1y1S6lxV",a.crossOrigin="",a.onload=function(){i.fillStyle="black",i.fillRect(0,0,o.width,o.height),i.drawImage(a,0,0),i.fillStyle="red",i.fillRect(0,0,100,100),i.fillStyle="green",i.fillRect(200,300,200,300);var e=new r.ColorPicker(o,{range:30,scale:3}),t=e.get_magnifier(0,0);window.addEventListener("mousemove",function(n){(t=e.get_magnifier(n.x,n.y)).style.position="absolute",t.style.top=n.y-t.height/2+"px",t.style.left=n.x-t.width/2+"px",t.style.cursor="none",document.body.append(t)})}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(2),o=document.createElement("canvas"),i=function(){function e(e,t){void 0===t&&(t={range:40,scale:4}),this.magnifier=o,this.current_color="",t.range=Math.ceil(t.range),t.range=t.range%2?t.range:t.range+1,t.scale=Math.ceil(t.scale),this.canvas=e,this.config=t;var n=this.config.scale*this.config.range,r=n;this.magnifier.width=n,this.magnifier.height=r}return e.prototype.get_pixels=function(e,t,n,o){var i=this;void 0===n&&(n=this.config.range),void 0===o&&(o=[255,255,255,255]);var a=Math.floor(e-(n-1)/2),c=Math.floor(t-(n-1)/2),f=this.canvas.getContext("2d")||this.canvas.getContext("webgl"),l=[];if(f instanceof CanvasRenderingContext2D)l=f.getImageData(a,c,n,n).data;else if(f instanceof WebGLRenderingContext){c=Math.floor(this.canvas.height-t-1-(n-1)/2);var u=new Uint8Array(n*n*4),s=new Uint8Array(4*n);f.readPixels(a,c,n,n,f.RGBA,f.UNSIGNED_BYTE,u);for(var g=n/2|0,h=4*n,p=0;p<g;++p){var _=p*h,d=(n-p-1)*h;s.set(u.subarray(_,_+h)),u.copyWithin(_,d,d+h),u.set(s,d)}l=u}var v=r.curryRight(r.chunk)(4);return r.flow([v,function(e){return e.map(function(e,o){return function(e){var o=Math.floor(t-(n-1)/2),c=e%i.config.range,f=Math.floor(e/i.config.range),l={x:a+c,y:o+f};return r.clamp(l.x,0,i.canvas.width-1)!==l.x||r.clamp(l.y,0,i.canvas.height-1)!==l.y}(o)?[255,255,255,255]:e})},r.flatten])(l)},e.prototype.get_current_color=function(){return this.current_color},e.prototype.get_x_index_of_area=function(e){return e%this.config.range},e.prototype.get_y_index_of_area=function(e){return Math.floor(e/this.config.range)},e.prototype.get_real_x=function(e){return e*this.config.scale},e.prototype.get_real_y=function(e){return e*this.config.scale},e.prototype.get_x_of_area=function(e){return this.get_real_x(this.get_x_index_of_area(e))},e.prototype.get_y_of_area=function(e){return this.get_real_y(this.get_y_index_of_area(e))},e.prototype.get_magnifier=function(e,t){var n=this;e=Math.floor(e),t=Math.floor(t);var o=Math.floor(e-(this.config.range-1)/2),i=Math.floor(t-(this.config.range-1)/2),a=this.get_pixels(e,t),c=this.magnifier.getContext("2d");c.clearRect(0,0,this.magnifier.width,this.magnifier.height);var f=r.curryRight(r.chunk)(4),l=r.flow([f,function(e){return e.map(function(e){for(var t=[],r=0;r<n.config.scale;r++)for(var o=0;o<n.config.scale;o++)t.push(e[0]),t.push(e[1]),t.push(e[2]),t.push(e[3]);return t})},function(e){return e.forEach(function(e,t){var r=c.createImageData(n.config.scale,n.config.scale);r.data.set(e);var o=n.get_x_of_area(t),i=n.get_y_of_area(t);c.putImageData(r,o,i)})}]),u=r.flow([function(){var r=n.get_real_x(e-o),a=n.get_real_y(t-i);c.save(),c.strokeStyle="#000000",c.lineWidth=1,c.strokeRect(r-1,a-1,n.config.scale+2,n.config.scale+2),c.strokeStyle="#FFFFFF",c.lineWidth=1,c.strokeRect(r-2,a-2,n.config.scale+4,n.config.scale+4),c.restore()},function(){n.get_pixels(e,t,1)}]);return l(a),u(),this.magnifier},e}();t.ColorPicker=i,t.get_color_picker=function(e,t){var n=document.createElement("canvas");return new i(n,{range:e,scale:t})}},function(e,t,n){"use strict";function r(e){if("object"!=typeof e)return e;if(null!=e.length){for(var t=[],n=0,o=e;n<o.length;n++){var i=o[n];t.push(r(i))}return t}for(var a={},c=0,f=Object.keys(e);c<f.length;c++){var l=f[c];"object"==typeof e[l]?a[l]=r(e[l]):a[l]=e[l]}return a}t.__esModule=!0,t.cloneDeep=r,t.flow=function(e){return function(t){for(var n=r(t),o=0,i=e;o<i.length;o++)n=(0,i[o])(n);return n}},t.clamp=function(e,t,n){return e<t?t:e>n?n:e},t.curryRight=function(e){var t=[],n=function(o){return t.length<e.length&&t.push(o),t.length===e.length?e.apply(void 0,r(t).reverse()):n};return n},t.chunk=function(e,t){if(t<=0)return[];if(t>=e.length)return[e.slice()];for(var n=[],r=[],o=0,i=e;o<i.length;o++){var a=i[o];r.length===t?(n.push(r),r=[a]):r.push(a)}return n.push(r),n},t.flatten=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var o=r[n];if(null!=o.length)for(var i=0,a=o;i<a.length;i++){var c=a[i];t.push(c)}else t.push(o)}return t}}]);
//# sourceMappingURL=bundle.js.map